

//--------------------------
// Alert
Table Alert {
  id varchar [pk]
  created_at varchar [not null]
  alert_type varchar [ref: > AlertType.id]
  camera varchar [ref: > Camera.id]
  video_url varchar 
}

//--------------------------
// Alert Feedback
Table AlertFeedback {
  id varchar [pk]
  created_at datetime [not null]
  feedback1 varchar 
  feedback2 varchar 
  alert varchar [ref: > Alert.id]
  user varchar [ref: > User.id]
}

//--------------------------
// Alert Type
Table AlertType {
  id varchar [pk]
  name varchar [not null]
  client varchar [ref: > Client.id]
}

//--------------------------
// Camera
Table Camera {
  id varchar [pk]
  shop_section varchar [ref: > ShopSection.id]
  position varchar [not null]
  status camera_status [not null]
}
Enum camera_status {
    up
    down
}

//--------------------------
// Client
Table Client {
  id varchar [pk]
  name varchar [not null]
  kpis_configuration varchar [ref: > KpisConfiguration.id, unique]
  siret varchar [not null]
}

//--------------------------
// Diffusion List
Table DiffusionList {
  id varchar [pk]
  alert_type varchar [ref: > AlertType.id]
  shop varchar [ref: > Shop.id]
  diffusion_channel diffusion_list_diffusion_channel [not null]
}
// Many-to-many for DiffusionList.users
Table DiffusionList_Users {
    id integer [pk, increment]
    diffusion_list varchar [ref: > DiffusionList.id]
    user varchar [ref: > User.id]
}
Enum diffusion_list_diffusion_channel {
    mail
    alert
}

//--------------------------
// Item Category
Table ItemCategory {
  id varchar [pk]
  name varchar [not null]
  Indexes {
    name [unique]
  }
}

//--------------------------
// Kpis Configuration
Table KpisConfiguration {
  id varchar [pk]
  feedback1 integer [not null]
  feedback2 integer [not null]
}

//--------------------------
// Shop
Table Shop {
  id varchar [pk]
  name varchar [not null]
  client varchar [ref: > Client.id]
}

//--------------------------
// Shop Department
Table ShopDepartment {
  id varchar [pk]
  name varchar 
  shop varchar [ref: > Shop.id]
}

//--------------------------
// Shop Section
Table ShopSection {
  id varchar [pk]
  name varchar [not null]
  shop_departement varchar [ref: > ShopDepartment.id]
  item_category varchar [ref: > ItemCategory.id]
  theft_average_value integer [not null]
}

//--------------------------
// Theft
Table Theft {
  id varchar [pk]
  date varchar [not null]
}

//--------------------------
// User
Table User {
  id varchar [pk]
  first_name varchar [not null]
  last_name varchar [not null]
  roles user_roles [not null]
  client varchar [ref: > Shop.id]
}
Enum user_roles {
    admin
    user
    guest
}
