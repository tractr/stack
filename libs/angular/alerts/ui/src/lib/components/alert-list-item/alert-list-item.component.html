<div class="alert-wrapper">
  <ng-container *ngIf="alert.videoStatus === 'videoAvailable'; else emptyVideo">
    <video src="{{ alert.videoUrl }}" controls loop></video>
  </ng-container>
  <ng-template #emptyVideo>
    <ng-container
      *ngIf="alert.videoStatus === 'videoDeleted'; else loadingVideo"
    >
      <div class="video-deleted">
        <i nz-icon nzType="delete" nzTheme="outline"></i>
      </div>
    </ng-container>
    <ng-template #loadingVideo>
      <div class="loading-video">
        <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
      </div>
    </ng-template>
  </ng-template>
  <div
    class="alert-info"
    [ngClass]="{
      'new-alert':
        !alert.alertFeedbacks || alert.alertFeedbacks[0].type === null,
      'in-progress':
        alert.alertFeedbacks &&
        alert.alertFeedbacks[0].type !== null &&
        !alert.alertFeedbacks[0].isArchived
    }"
  >
    <div>
      <p class="date-alert">{{ alert.createdAt | date: 'EEEE dd LLLL' }}</p>
      <p class="time-alert">
        <span>{{ alert.createdAt | date: 'HH' }}</span
        >H<span>{{ alert.createdAt | date: 'mm' }}</span>
      </p>
      <p class="status-alert">
        {{ 'status-alert' | translate }}:
        <ng-container
          *ngIf="
            alert.alertFeedbacks && alert.alertFeedbacks[0].type;
            else statusNewAlert
          "
        >
          <span>{{
            'status-alert-type-' + alert.alertFeedbacks[0].type | translate
          }}</span>
        </ng-container>
        <ng-template #statusNewAlert>
          <span>{{ 'status-alert-type-new-alert' | translate }}</span>
        </ng-template>
      </p>
    </div>
    <div>
      <p class="section-alert">
        {{ alert.camera?.shopSection?.name }}
      </p>
      <p class="object-alert">
        {{ alert.camera?.shopSection?.itemCategory?.name }}
      </p>
    </div>
  </div>
</div>
